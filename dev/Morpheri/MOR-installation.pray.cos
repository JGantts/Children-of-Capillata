**CAOS2PRAY
*# Pray-File "CoC_MOR.agents"
*# DS-Name "CoC - Morpheri"
*# Agent Animation File = "fav_place_coc_mor.c16"
*# Agent Sprite First Image = 1
*# desc = "This is Morpheri. A quaint little area with some grass.\n\nRequires the Universal Hub!\n\nPart of the Children of Capillata.\nConcept for CoC by Silvak. Design and images by Zequr. Maintained by and code by Zzzzoot."

*# attach coc_morpheri.blk coc_mor_moruh_door.c16 coc_mor_uhmor_door.c16 fav_place_coc_mor.c16 coc_lib_c3lift.c16 Mor.catalogue but1.wav clik.wav ding.wav hit_.wav
*# Link MOR-door-events.cos LIB-c3lift-events.cos

* Script 1 extracted from Mor.agents by Mirality REVELATION
* Thank you Mirality! -Zzzzoot

inst
reaf

enum 1 2 5
	kill targ
next
enum 1 2 24403
	kill targ
next


**Copied from DS agent help
new: comp 1 2 24403 "useful_screen" 1 0 9040
attr 304
pat: fixd 1 "useful_screen" 1 25 59 1 "WhiteOnTransparentChars"
part 1
frmt 8 8 8 18 3 0 0
pat: butt 2 "useful_screen" 13 2 122 290 0 [0 1 255] 1000 0
pat: fixd 6 "useful_screen" 15 119 306 1 "WhiteOnTransparentChars"
part 6
frmt 0 0 0 0 3 0 2
pat: fixd 3 "useful_screen" 12 22 22 1 "WhiteOnTransparentChars"
part 3
frmt 8 0 37 0 2 0 8
setv va90 wndw
divv va90 2
setv va91 wndh
divv va91 2
setv va92 wdth
divv va92 2
setv va93 hght
divv va93 2
subv va90 va92
subv va91 va93
flto va90 va91
**/
part 3
ptxt "Morpheri v1.3"
part 1
ptxt read "zot_Mor" 0

*kill dialog
scrp 1 2 24403 1001
	kill ownr
endm

***close text box and install the agent
scrp 1 2 24403 1000
	inst
	part 2
	anim [0 1 0]
	over
	inst

	doif game "CoC_MOR" = 1
		targ ownr
		pat: kill 2
		pat: butt 2 "useful_screen" 13 2 122 290 0 [0 1 255] 1001 0
		part 1
		ptxt "Morpheri is already injected."
	elif game "CoC_UH" = 0
*		oops, UH isn't installed
		targ ownr
		pat: kill 2
		pat: butt 2 "useful_screen" 13 2 122 290 0 [0 1 255] 1001 0
		part 1
		ptxt "You need to inject the Universal Hub first. Go to this webpage to get it:\n\nhttp://creatures.wikia.com/wiki/Universal_Hub"
	else
*			*********
*			***MAP***
*			*********
*			* Autogenerated by the Creatures Map Editor
*			* For more info see http://cdn.creatures.net
*
*			* Addon file: deletes existing metarooms at the same place, same background name
*			* 1 metarooms, 19 rooms, 21 doors

		mapd 100000 100000

		setv game "mapeditortmp" addm 39803 30310 1260 900 "coc_morpheri"
		mmsc 40433 30760 ""
		setv va00 addr game "mapeditortmp" 39877 40138 30458 30319 30560 30560
		rtyp va00 5
		rmsc 40007 30509 ""
		setv game "mapeditortmp_0" va00
		setv va00 addr game "mapeditortmp" 40138 40303 30319 30321 30560 30560
		rtyp va00 5
		rmsc 40220 30439 ""
		setv game "mapeditortmp_1" va00
		setv va00 addr game "mapeditortmp" 40303 40554 30321 30322 30560 30557
		rtyp va00 5
		rmsc 40428 30439 ""
		setv game "mapeditortmp_2" va00
		setv va00 addr game "mapeditortmp" 40554 40745 30322 30322 30557 30557
		rtyp va00 5
		rmsc 40649 30439 ""
		setv game "mapeditortmp_3" va00
		setv va00 addr game "mapeditortmp" 40745 40917 30322 30389 30557 30578
		rtyp va00 5
		rmsc 40831 30450 ""
		setv game "mapeditortmp_4" va00
		setv va00 addr game "mapeditortmp" 40163 40293 30560 30560 30645 30645
		rtyp va00 0
		rmsc 40228 30602 ""
		setv game "mapeditortmp_5" va00
		setv va00 addr game "mapeditortmp" 40163 40293 30645 30645 30854 30854
		rtyp va00 5
		rmsc 40228 30749 ""
		setv game "mapeditortmp_6" va00
		setv va00 addr game "mapeditortmp" 40293 40393 30734 30734 30854 30858
		rtyp va00 5
		rmsc 40343 30796 ""
		setv game "mapeditortmp_7" va00
		setv va00 addr game "mapeditortmp" 40393 40455 30734 30734 30858 30868
		rtyp va00 3
		rmsc 40424 30801 ""
		setv game "mapeditortmp_8" va00
		setv va00 addr game "mapeditortmp" 40455 40679 30734 30734 30868 30867
		rtyp va00 3
		rmsc 40567 30800 ""
		setv game "mapeditortmp_9" va00
		setv va00 addr game "mapeditortmp" 40679 40872 30638 30647 30867 30867
		rtyp va00 3
		rmsc 40775 30752 ""
		setv game "mapeditortmp_10" va00
		setv va00 addr game "mapeditortmp" 40872 41014 30647 30722 30867 30867
		rtyp va00 3
		rmsc 40943 30757 ""
		setv game "mapeditortmp_11" va00
		setv va00 addr game "mapeditortmp" 40293 40679 30645 30638 30734 30734
		rtyp va00 0
		rmsc 40486 30689 ""
		setv game "mapeditortmp_12" va00
		setv va00 addr game "mapeditortmp" 40000 40163 30651 30645 30861 30854
		rtyp va00 5
		rmsc 40081 30752 ""
		setv game "mapeditortmp_13" va00
		setv va00 addr game "mapeditortmp" 39845 40000 30707 30651 30861 30861
		rtyp va00 5
		rmsc 39922 30784 ""
		setv game "mapeditortmp_14" va00
		setv va00 addr game "mapeditortmp" 40163 40285 30854 30854 30927 30927
		rtyp va00 0
		rmsc 40224 30896 ""
		setv game "mapeditortmp_15" va00
		setv va00 addr game "mapeditortmp" 39990 40163 30927 30927 31074 31060
		rtyp va00 6
		rmsc 40076 30993 ""
		setv game "mapeditortmp_16" va00
		setv va00 addr game "mapeditortmp" 39851 39990 30895 30927 31015 31074
		rtyp va00 6
		rmsc 39920 30988 ""
		setv game "mapeditortmp_17" va00
		setv va00 addr game "mapeditortmp" 40163 40387 30927 30927 31060 31060
		rtyp va00 6
		rmsc 40275 30993 ""
		setv game "mapeditortmp_18" va00
		setv va00 addr game "mapeditortmp" 40387 40436 30927 30927 31060 31060
		rtyp va00 6
		rmsc 40411 30998 ""
		setv game "mapeditortmp_19" va00
		setv va00 addr game "mapeditortmp" 40436 40465 30927 30932 31060 31085
		rtyp va00 6
		rmsc 40450 31010 ""
		setv game "mapeditortmp_20" va00
		setv va00 addr game "mapeditortmp" 40465 40505 30932 30954 31080 31080
		rtyp va00 0
		rmsc 40485 31006 ""
		setv game "mapeditortmp_21" va00
		setv va00 addr game "mapeditortmp" 40505 40555 30954 30931 31080 31080
		rtyp va00 0
		rmsc 40530 31017 ""
		setv game "mapeditortmp_22" va00
		setv va00 addr game "mapeditortmp" 40555 40730 30931 30930 31080 31080
		rtyp va00 0
		rmsc 40642 31005 ""
		setv game "mapeditortmp_23" va00
		setv va00 addr game "mapeditortmp" 40730 40775 30930 30954 31080 31080
		rtyp va00 0
		rmsc 40752 31005 ""
		setv game "mapeditortmp_24" va00
		setv va00 addr game "mapeditortmp" 40775 40829 30954 30933 31080 31080
		rtyp va00 0
		rmsc 40802 31017 ""
		setv game "mapeditortmp_25" va00
		setv va00 addr game "mapeditortmp" 40829 40984 30933 30934 31080 31080
		rtyp va00 0
		rmsc 40906 31006 ""
		setv game "mapeditortmp_26" va00
		setv va00 addr game "mapeditortmp" 40984 41001 30934 30949 31080 31080
		rtyp va00 0
		rmsc 40992 31007 ""
		setv game "mapeditortmp_27" va00
		setv va00 addr game "mapeditortmp" 40930 41001 31080 31080 31149 31088
		rtyp va00 8
		rmsc 40965 31084 ""
		setv game "mapeditortmp_28" va00
		setv va00 addr game "mapeditortmp" 40753 40930 31080 31080 31155 31149
		rtyp va00 8
		rmsc 40841 31114 ""
		setv game "mapeditortmp_29" va00
		setv va00 addr game "mapeditortmp" 40565 40753 31080 31080 31156 31155
		rtyp va00 8
		rmsc 40659 31117 ""
		setv game "mapeditortmp_30" va00
		setv va00 addr game "mapeditortmp" 40465 40565 31080 31080 31085 31156
		rtyp va00 8
		rmsc 40515 31118 ""
		setv game "mapeditortmp_31" va00

		door game "mapeditortmp_0" game "mapeditortmp_1" 100
		door game "mapeditortmp_1" game "mapeditortmp_2" 100
		door game "mapeditortmp_1" game "mapeditortmp_5" 50
		door game "mapeditortmp_2" game "mapeditortmp_3" 100
		door game "mapeditortmp_3" game "mapeditortmp_4" 100
		door game "mapeditortmp_5" game "mapeditortmp_6" 100
		door game "mapeditortmp_6" game "mapeditortmp_7" 100
		door game "mapeditortmp_6" game "mapeditortmp_12" 100
		door game "mapeditortmp_6" game "mapeditortmp_13" 100
		door game "mapeditortmp_6" game "mapeditortmp_15" 50

		door game "mapeditortmp_7" game "mapeditortmp_8" 100
		door game "mapeditortmp_7" game "mapeditortmp_12" 100
		door game "mapeditortmp_8" game "mapeditortmp_9" 100
		door game "mapeditortmp_8" game "mapeditortmp_12" 100
		door game "mapeditortmp_9" game "mapeditortmp_10" 100
		door game "mapeditortmp_9" game "mapeditortmp_12" 100
		door game "mapeditortmp_10" game "mapeditortmp_11" 100
		door game "mapeditortmp_10" game "mapeditortmp_12" 100
		door game "mapeditortmp_13" game "mapeditortmp_14" 100
		door game "mapeditortmp_15" game "mapeditortmp_18" 100

		door game "mapeditortmp_16" game "mapeditortmp_17" 100
		door game "mapeditortmp_16" game "mapeditortmp_18" 100
		door game "mapeditortmp_18" game "mapeditortmp_19" 100
		door game "mapeditortmp_19" game "mapeditortmp_20" 100
		door game "mapeditortmp_20" game "mapeditortmp_21" 100
		door game "mapeditortmp_20" game "mapeditortmp_31" 100
		door game "mapeditortmp_21" game "mapeditortmp_22" 100
		door game "mapeditortmp_21" game "mapeditortmp_31" 100
		door game "mapeditortmp_22" game "mapeditortmp_23" 100
		door game "mapeditortmp_22" game "mapeditortmp_31" 100

		door game "mapeditortmp_23" game "mapeditortmp_24" 100
		door game "mapeditortmp_23" game "mapeditortmp_30" 100
		door game "mapeditortmp_23" game "mapeditortmp_31" 100
		door game "mapeditortmp_24" game "mapeditortmp_25" 100
		door game "mapeditortmp_24" game "mapeditortmp_29" 100
		door game "mapeditortmp_24" game "mapeditortmp_30" 100
		door game "mapeditortmp_25" game "mapeditortmp_26" 100
		door game "mapeditortmp_25" game "mapeditortmp_29" 100
		door game "mapeditortmp_26" game "mapeditortmp_27" 100
		door game "mapeditortmp_26" game "mapeditortmp_28" 100

		door game "mapeditortmp_26" game "mapeditortmp_29" 100
		door game "mapeditortmp_27" game "mapeditortmp_28" 100
		door game "mapeditortmp_28" game "mapeditortmp_29" 100
		door game "mapeditortmp_29" game "mapeditortmp_30" 100
		door game "mapeditortmp_30" game "mapeditortmp_31" 100

		delg "mapeditortmp_0"
		delg "mapeditortmp_1"
		delg "mapeditortmp_2"
		delg "mapeditortmp_3"
		delg "mapeditortmp_4"
		delg "mapeditortmp_5"
		delg "mapeditortmp_6"
		delg "mapeditortmp_7"
		delg "mapeditortmp_8"
		delg "mapeditortmp_9"
		delg "mapeditortmp_10"
		delg "mapeditortmp_11"
		delg "mapeditortmp_12"
		delg "mapeditortmp_13"
		delg "mapeditortmp_14"
		delg "mapeditortmp_15"
		delg "mapeditortmp_16"
		delg "mapeditortmp_17"
		delg "mapeditortmp_18"
		delg "mapeditortmp_19"
		delg "mapeditortmp_20"
		delg "mapeditortmp_21"
		delg "mapeditortmp_22"
		delg "mapeditortmp_23"
		delg "mapeditortmp_24"
		delg "mapeditortmp_25"
		delg "mapeditortmp_26"
		delg "mapeditortmp_27"
		delg "mapeditortmp_28"
		delg "mapeditortmp_29"
		delg "mapeditortmp_30"
		delg "mapeditortmp_31"

*			***********
*			***//MAP***
*			***********

*			***************
*			***FAV place***
*			***************
		new: simp 1 3 24404 "fav_place_coc_mor" 1 0 1
		attr 272
		mvto 40416 30789
		cmrt 0
		tick 10
*			*****************
*			***//FAV place***
*			*****************

*			****************
*			***Enviroment***
*			****************
		setv va00 0

		setv va01 30376
** Norn Home (only at the top)
		new: simp 1 1 24402 "blnk" 1 0 0
		emit 15 .1
		mvto 40091 va01
		reps 3
** Water
			new: simp 1 1 167 "blnk" 1 va00 0
			attr 16
			mvto 40191 va01
			tick 150

** Light
			new: simp 1 1 24401 "blnk" 1 va00 0
			attr 16
			mvto 40291 va01
			emit 01 1

** Heat
			new: simp 1 1 24401 "blnk" 1 va00 0
			attr 16
			mvto 40391 va01
			emit 02 1

			addv va01 300
		repe

** Nutrients

		reps 40
			inst
			new: simp 1 1 171 "blnk" 1 va00 3000
			attr 192
			elas 0
			accg 0.4
			perm 40
			mvto rand 40300 40400 30367
		repe

*			******************
*			***//Enviroment***
*			******************

*			**********
*			***Door***
*			**********
		enum 5 5 24401
			doif ov00 = 1
				setv va00 posl
				setv va01 post
				kill targ
			endi
		next

* UH

		new: comp 2 2 24407 "coc_mor_uhmor_door" 14 0 0
* mvto the location of the late dummy door
		addv va00 1
		mvto va00 va01
* user can click on door and when s/he does run script 1
		attr 4
		clac 0
		bhvr 1
		setv va00 room targ
** set the entry
		setv ov00 1
		setv ov01 1
		setv ov02 1
		pat: butt 1 "coc_mor_uhmor_door" 14 4 -35 22 0 [] 1000 0
		pat: butt 2 "coc_mor_uhmor_door" 15 3 -35 45 0 [] 1000 0
		pat: butt 3 "coc_mor_uhmor_door" 16 2 -35 70 0 [] 1000 0

* MOR
		new: comp 2 2 24408 "coc_mor_moruh_door" 4 4 0
		mvto 39994 30956
* user can click on door and when s/he does run script 1
		attr 4
		clac 0
		bhvr 1
		tran 0 0
** link the rooms, spread the CA around
		link va00 room targ 5
		setv ov00 1
		setv ov01 1
		setv ov02 1

*			************
*			***//Door***
*			************


*			**********
*			***Lift***
*			**********

*		new ZootC3Lift()
		new: vhcl 3 1 24402 "coc_lib_c3lift" 4 0 50
*		lift = targ
		seta va00 targ
		bhvr 3
		attr 12
		clac -1
		elas 0
*map position lift
		mvto 40167 30430
*		From? = null
		seta ov99 null
*		IsActive = false
		setv ov00 0
*		IsMoving = false
		setv ov80 0
*		ButtonCurrent = promiseNotNullAfterInstall
		seta ov30 null
*		ButtonDestination? = null
		seta ov31 null
*		Door = newPart()
		pat: dull 1 "coc_lib_c3lift" 4 0 0 200
		cabn 0 0 121 144
		cabw 5
*		UpButton = newPart()
		pat: butt 2 "coc_lib_c3lift" 14 1 52 68 0 [] 0 0
*		DownButton = newPart()
		pat: butt 3 "coc_lib_c3lift" 14 1 52 82 0 [] 1 0
*		Door.Pose.Open
		part 1
		pose 7

*Top Button
*		new ZootC3LiftButton
		new: simp 2 12 24402 "coc_lib_c3lift" 2 12 5000
*		currentButton = targ
		seta va01 targ
		bhvr 1
		attr 4
		perm 10
		clac 0
		elas 0
*map position top
		mvto 40122 30485
*		IsActive = true
		setv ov00 1
*		Lift = lift
		seta ov16 va00
*		ButtonAbove? = null
		seta ov20 null
*		ButtonBelow? = null
		seta ov21 null
*		lift.ButtonCurrent = currentButton
		targ va00
		seta ov30 va01
*		targ currentButton
		targ va01
*		Pose.Off
		pose 0
*		roomId1 = Room()
		setv va66 room targ

*		previousButton = currentButton
		seta va02 va01

*Middle Button
*		new ZootC3LiftButton
		new: simp 2 12 24402 "coc_lib_c3lift" 2 12 5000
*		currentButton = targ
		seta va01 targ
		bhvr 1
		attr 4
		perm 10
		clac 0
		elas 0
*map position middle
		mvto 40122 30786
*		IsActive = false
		setv ov00 0
*		Lift = lift
		seta ov16 va00
*		ButtonAbove? = previousButton
		seta ov20 va02
*		ButtonBelow? = null
		seta ov21 null
*		previousbutton.ButtonBelow? = currentButton
		targ va02
		seta ov21 va01
*		targ currentButton
		targ va01
*		Pose.Off
		pose 0
*		roomId2 = Room()
		setv va67 room targ
*		linkSmells(roomId1, roomId2)
		link va66 va67 100

*		previousButton = currentButton
		seta va02 va01

*BottomButton
*		new ZootC3LiftButton
		new: simp 2 12 24402 "coc_lib_c3lift" 2 12 5000
*		currentButton = targ
		seta va01 targ
		bhvr 1
		attr 4
		perm 10
		clac 0
		elas 0
*map position bottom
		mvto 40122 30985
*		IsActive = false
		setv ov00 0
*		Lift = lift
		seta ov16 va00
*		ButtonAbove? = previousButton
		seta ov20 va02
*		ButtonBelow? = null
		seta ov21 null
*		previousbutton.ButtonBelow? = currentButton
		targ va02
		seta ov21 va01
*		targ currentButton
		targ va01
*		Pose.Off
		pose 0
*		roomId1 = Room()
		setv va66 room targ
*		linkSmells(roomId2, roomId1)
		link va66 va67 100


*			************
*			***//Lift***
*			************


		setv game "CoC_MOR" 1
		kill ownr
	endi
endm

*rscr
*delr gmap 40400 30747
*enum 1 2 5
*	kill targ
*next
*enum 1 2 24403
*	kill targ
*next
