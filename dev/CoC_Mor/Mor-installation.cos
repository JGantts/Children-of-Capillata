**CAOS2PRAY
*# Pray-File "CoC_MOR.agents"
*# DS-Name "CoC - Morpheri"
*# Agent Animation File = "fav_place_cocmor.c16"
*# Agent Sprite First Image = 1
*# desc = "This is Morpheri. It is a whole new room to explore!the Universal Hub!for Children of Capilata by Silvakby Zequrby Zzzzoot"

*# attach Morpheri.blk cocmordoor.c16 ettin_doors.c16 fav_place_CoC_Mor.c16 lift.c16 Mor.catalogue boi2.wav clik.wav ding.wav
*# Link MOR-scripts-1.cos MOR-scripts-2.cos

* Script 1 extracted from Mor.agents by Mirality REVELATION
* Thank you Mirality! -Zzzzoot

inst

enum 1 2 5
	kill targ
next
enum 1 2 24403
	kill targ
next


**Copied from DS agent help
new: comp 1 2 24403 "useful_screen" 1 0 9040
attr 304
pat: fixd 1 "useful_screen" 1 25 59 1 "WhiteOnTransparentChars"
part 1
frmt 8 8 8 18 3 0 0
pat: butt 2 "useful_screen" 13 2 122 290 0 [0 1 255] 1000 0
pat: fixd 6 "useful_screen" 15 119 306 1 "WhiteOnTransparentChars"
part 6
frmt 0 0 0 0 3 0 2
pat: fixd 3 "useful_screen" 12 22 22 1 "WhiteOnTransparentChars"
part 3
frmt 8 0 37 0 2 0 8
setv va90 wndw
divv va90 2
setv va91 wndh
divv va91 2
setv va92 wdth
divv va92 2
setv va93 hght
divv va93 2
subv va90 va92
subv va91 va93
flto va90 va91
**/
part 3
ptxt "Morpheri 1.0.1 (Beta testing)"
part 1
ptxt read "zot_Mor" 0

***close text box and install the agent
scrp 1 2 24403 1000
	inst
	part 2
	anim [0 1 0]
	over
	inst

*	inject
	doif game "UH" = 1
*			*********
*			***MAP***
*			*********
*			* Autogenerated by the Creatures Map Editor
*			* For more info see http://cdn.creatures.net
*			
*			* Addon file: deletes existing metarooms at the same place, same background name
*			* 1 metarooms, 19 rooms, 21 doors

		mapd 100000 100000

		setv game "mapeditortmp" addm 39803 30310 1260 900 "Morpheri"
		mmsc 40433 30760 ""
		setv va00 addr game "mapeditortmp" 39877 40138 30458 30319 30560 30560
		rtyp va00 5
		rmsc 40007 30509 ""
		setv game "mapeditortmp_0" va00
		setv va00 addr game "mapeditortmp" 40138 40303 30319 30321 30560 30560
		rtyp va00 5
		rmsc 40220 30439 ""
		setv game "mapeditortmp_1" va00
		setv va00 addr game "mapeditortmp" 40303 40554 30321 30322 30560 30557
		rtyp va00 5
		rmsc 40428 30439 ""
		setv game "mapeditortmp_2" va00
		setv va00 addr game "mapeditortmp" 40554 40745 30322 30322 30557 30557
		rtyp va00 5
		rmsc 40649 30439 ""
		setv game "mapeditortmp_3" va00
		setv va00 addr game "mapeditortmp" 40745 40917 30322 30389 30557 30578
		rtyp va00 5
		rmsc 40831 30450 ""
		setv game "mapeditortmp_4" va00
		setv va00 addr game "mapeditortmp" 40163 40293 30560 30560 30645 30645
		rtyp va00 0
		rmsc 40228 30602 ""
		setv game "mapeditortmp_5" va00
		setv va00 addr game "mapeditortmp" 40163 40293 30645 30645 30854 30854
		rtyp va00 5
		rmsc 40228 30749 ""
		setv game "mapeditortmp_6" va00
		setv va00 addr game "mapeditortmp" 40293 40393 30734 30734 30854 30858
		rtyp va00 5
		rmsc 40343 30796 ""
		setv game "mapeditortmp_7" va00
		setv va00 addr game "mapeditortmp" 40393 40455 30734 30734 30858 30868
		rtyp va00 3
		rmsc 40424 30801 ""
		setv game "mapeditortmp_8" va00
		setv va00 addr game "mapeditortmp" 40455 40679 30734 30734 30868 30867
		rtyp va00 3
		rmsc 40567 30800 ""
		setv game "mapeditortmp_9" va00
		setv va00 addr game "mapeditortmp" 40679 40872 30638 30647 30867 30867
		rtyp va00 3
		rmsc 40775 30752 ""
		setv game "mapeditortmp_10" va00
		setv va00 addr game "mapeditortmp" 40872 41014 30647 30722 30867 30867
		rtyp va00 3
		rmsc 40943 30757 ""
		setv game "mapeditortmp_11" va00
		setv va00 addr game "mapeditortmp" 40293 40679 30645 30638 30734 30734
		rtyp va00 0
		rmsc 40486 30689 ""
		setv game "mapeditortmp_12" va00
		setv va00 addr game "mapeditortmp" 40000 40163 30651 30645 30861 30854
		rtyp va00 5
		rmsc 40081 30752 ""
		setv game "mapeditortmp_13" va00
		setv va00 addr game "mapeditortmp" 39845 40000 30707 30651 30861 30861
		rtyp va00 5
		rmsc 39922 30784 ""
		setv game "mapeditortmp_14" va00
		setv va00 addr game "mapeditortmp" 40163 40285 30854 30854 30942 30939
		rtyp va00 0
		rmsc 40224 30896 ""
		setv game "mapeditortmp_15" va00
		setv va00 addr game "mapeditortmp" 39990 40163 30927 30942 31074 31060
		rtyp va00 6
		rmsc 40076 30993 ""
		setv game "mapeditortmp_16" va00
		setv va00 addr game "mapeditortmp" 39851 39990 30902 30927 31006 31074
		rtyp va00 6
		rmsc 39920 30988 ""
		setv game "mapeditortmp_17" va00
		setv va00 addr game "mapeditortmp" 40163 40387 30942 30936 31060 31045
		rtyp va00 6
		rmsc 40275 30993 ""
		setv game "mapeditortmp_18" va00
		setv va00 addr game "mapeditortmp" 40387 40436 30936 30936 31045 31060
		rtyp va00 6
		rmsc 40411 30998 ""
		setv game "mapeditortmp_19" va00
		setv va00 addr game "mapeditortmp" 40436 40465 30936 30932 31060 31085
		rtyp va00 6
		rmsc 40450 31010 ""
		setv game "mapeditortmp_20" va00
		setv va00 addr game "mapeditortmp" 40465 40505 30932 30954 31080 31080
		rtyp va00 0
		rmsc 40485 31006 ""
		setv game "mapeditortmp_21" va00
		setv va00 addr game "mapeditortmp" 40505 40555 30954 30931 31080 31080
		rtyp va00 0
		rmsc 40530 31017 ""
		setv game "mapeditortmp_22" va00
		setv va00 addr game "mapeditortmp" 40555 40730 30931 30930 31080 31080
		rtyp va00 0
		rmsc 40642 31005 ""
		setv game "mapeditortmp_23" va00
		setv va00 addr game "mapeditortmp" 40730 40775 30930 30954 31080 31080
		rtyp va00 0
		rmsc 40752 31005 ""
		setv game "mapeditortmp_24" va00
		setv va00 addr game "mapeditortmp" 40775 40829 30954 30933 31080 31080
		rtyp va00 0
		rmsc 40802 31017 ""
		setv game "mapeditortmp_25" va00
		setv va00 addr game "mapeditortmp" 40829 40984 30933 30934 31080 31080
		rtyp va00 0
		rmsc 40906 31006 ""
		setv game "mapeditortmp_26" va00
		setv va00 addr game "mapeditortmp" 40984 41001 30934 30949 31080 31080
		rtyp va00 0
		rmsc 40992 31007 ""
		setv game "mapeditortmp_27" va00
		setv va00 addr game "mapeditortmp" 40930 41001 31080 31080 31149 31088
		rtyp va00 8
		rmsc 40965 31084 ""
		setv game "mapeditortmp_28" va00
		setv va00 addr game "mapeditortmp" 40753 40930 31080 31080 31155 31149
		rtyp va00 8
		rmsc 40841 31114 ""
		setv game "mapeditortmp_29" va00
		setv va00 addr game "mapeditortmp" 40565 40753 31080 31080 31156 31155
		rtyp va00 8
		rmsc 40659 31117 ""
		setv game "mapeditortmp_30" va00
		setv va00 addr game "mapeditortmp" 40465 40565 31080 31080 31085 31156
		rtyp va00 8
		rmsc 40515 31118 ""
		setv game "mapeditortmp_31" va00

		door game "mapeditortmp_0" game "mapeditortmp_1" 100
		door game "mapeditortmp_1" game "mapeditortmp_2" 100
		door game "mapeditortmp_1" game "mapeditortmp_5" 50
		door game "mapeditortmp_2" game "mapeditortmp_3" 100
		door game "mapeditortmp_3" game "mapeditortmp_4" 100
		door game "mapeditortmp_5" game "mapeditortmp_6" 100
		door game "mapeditortmp_6" game "mapeditortmp_7" 100
		door game "mapeditortmp_6" game "mapeditortmp_12" 100
		door game "mapeditortmp_6" game "mapeditortmp_13" 100
		door game "mapeditortmp_6" game "mapeditortmp_15" 50

		door game "mapeditortmp_7" game "mapeditortmp_8" 100
		door game "mapeditortmp_7" game "mapeditortmp_12" 100
		door game "mapeditortmp_8" game "mapeditortmp_9" 100
		door game "mapeditortmp_8" game "mapeditortmp_12" 100
		door game "mapeditortmp_9" game "mapeditortmp_10" 100
		door game "mapeditortmp_9" game "mapeditortmp_12" 100
		door game "mapeditortmp_10" game "mapeditortmp_11" 100
		door game "mapeditortmp_10" game "mapeditortmp_12" 100
		door game "mapeditortmp_13" game "mapeditortmp_14" 100
		door game "mapeditortmp_15" game "mapeditortmp_18" 100

		door game "mapeditortmp_16" game "mapeditortmp_17" 100
		door game "mapeditortmp_16" game "mapeditortmp_18" 100
		door game "mapeditortmp_18" game "mapeditortmp_19" 100
		door game "mapeditortmp_19" game "mapeditortmp_20" 100
		door game "mapeditortmp_20" game "mapeditortmp_21" 100
		door game "mapeditortmp_20" game "mapeditortmp_31" 100
		door game "mapeditortmp_21" game "mapeditortmp_22" 100
		door game "mapeditortmp_21" game "mapeditortmp_31" 100
		door game "mapeditortmp_22" game "mapeditortmp_23" 100
		door game "mapeditortmp_22" game "mapeditortmp_31" 100

		door game "mapeditortmp_23" game "mapeditortmp_24" 100
		door game "mapeditortmp_23" game "mapeditortmp_30" 100
		door game "mapeditortmp_23" game "mapeditortmp_31" 100
		door game "mapeditortmp_24" game "mapeditortmp_25" 100
		door game "mapeditortmp_24" game "mapeditortmp_29" 100
		door game "mapeditortmp_24" game "mapeditortmp_30" 100
		door game "mapeditortmp_25" game "mapeditortmp_26" 100
		door game "mapeditortmp_25" game "mapeditortmp_29" 100
		door game "mapeditortmp_26" game "mapeditortmp_27" 100
		door game "mapeditortmp_26" game "mapeditortmp_28" 100

		door game "mapeditortmp_26" game "mapeditortmp_29" 100
		door game "mapeditortmp_27" game "mapeditortmp_28" 100
		door game "mapeditortmp_28" game "mapeditortmp_29" 100
		door game "mapeditortmp_29" game "mapeditortmp_30" 100
		door game "mapeditortmp_30" game "mapeditortmp_31" 100

		delg "mapeditortmp_0"
		delg "mapeditortmp_1"
		delg "mapeditortmp_2"
		delg "mapeditortmp_3"
		delg "mapeditortmp_4"
		delg "mapeditortmp_5"
		delg "mapeditortmp_6"
		delg "mapeditortmp_7"
		delg "mapeditortmp_8"
		delg "mapeditortmp_9"
		delg "mapeditortmp_10"
		delg "mapeditortmp_11"
		delg "mapeditortmp_12"
		delg "mapeditortmp_13"
		delg "mapeditortmp_14"
		delg "mapeditortmp_15"
		delg "mapeditortmp_16"
		delg "mapeditortmp_17"
		delg "mapeditortmp_18"
		delg "mapeditortmp_19"
		delg "mapeditortmp_20"
		delg "mapeditortmp_21"
		delg "mapeditortmp_22"
		delg "mapeditortmp_23"
		delg "mapeditortmp_24"
		delg "mapeditortmp_25"
		delg "mapeditortmp_26"
		delg "mapeditortmp_27"
		delg "mapeditortmp_28"
		delg "mapeditortmp_29"
		delg "mapeditortmp_30"
		delg "mapeditortmp_31"

*			***********
*			***//MAP***
*			***********

*			***************
*			***FAV place***
*			***************
		new: simp 1 3 24404 "fav_place_CoC_Mor" 1 0 1
		attr 272
		mvto 40416 30789
		cmrt 0
		tick 10
*			*****************
*			***//FAV place***
*			*****************

*			****************
*			***Enviroment***
*			****************
		setv va00 0

		setv va01 30376
		reps 3
** Water
			new: simp 1 1 167 "blnk" 1 va00 0
			attr 16
			mvto 40191 va01
			tick 150

** Light
			new: simp 1 1 24401 "blnk" 1 va00 0
			attr 16
			mvto 40291 va01
			emit 01 1

** Heat
			new: simp 1 1 24401 "blnk" 1 va00 0
			attr 16
			mvto 40391 va01
			emit 02 1

			addv va01 300
		repe

** Nutrients

		reps 40
			inst
			new: simp 1 1 171 "blnk" 1 va00 3000
			attr 192
			elas 0
			accg 0.4
			perm 40
			mvto rand 40300 40400 30367
		repe

*			******************
*			***//Enviroment***
*			******************

*			**********
*			***Door***
*			**********
		enum 5 5 24401
			doif ov00 = 1
				setv va00 posl
				setv va01 post
				kill targ
			endi
		next

* UH

		new: comp 2 2 24407 "cocmordoor" 14 0 0
* mvto the location of the late dummy door
		addv va00 1
		mvto va00 va01
* user can click on door and when s/he does run script 1
		attr 4
		clac 0
		bhvr 1
		setv va00 room targ
** set the entry
		setv ov00 1
		setv ov01 1
		setv ov02 1
		pat: butt 1 "CoCmordoor" 14 4 -35 22 0 [] 1000 0
		pat: butt 2 "CoCmordoor" 15 3 -35 45 0 [] 1000 0
		pat: butt 3 "CoCmordoor" 16 2 -35 70 0 [] 1000 0

* MOR
		new: comp 2 2 24408 "ettin_doors" 4 4 0
		mvto 39994 30956
* user can click on door and when s/he does run script 1
		attr 4
		clac 0
		bhvr 1
		tran 0 0
** link the rooms, spread the CA around
		link va00 room targ 100
		setv ov00 1
		setv ov01 1
		setv ov02 1

*			************
*			***//Door***
*			************


*			**********
*			***Lift***
*			**********
		new: simp 2 12 2 "lift" 2 14 5000
		bhvr 1
		attr 4
		perm 10
		clac 0
		elas 0
		setv ov88 2
		setv ov00 0
		seta ov16 null
		prt: inew 0 "lift call button in" "reads in data" 37 9 1000
		prt: onew 0 "lift call button out" "outputs input data or lift call state" 38 20
*map position top
		setv va45 40122
		mvto va45 30485

		pose 0
		setv va66 room targ

		new: simp 2 12 2 "lift" 2 14 5000
		bhvr 1
		attr 4
		perm 10
		clac 0
		elas 0
		setv ov88 2
		setv ov00 0
		seta ov16 null
		prt: inew 0 "lift call button in" "reads in data" 37 9 1000
		prt: onew 0 "lift call button out" "outputs input data or lift call state" 38 20
*map position middle
		mvto va45 30786

		pose 0
		setv va67 room targ
		link va66 va67 100

		new: simp 2 12 2 "lift" 2 14 5000
		bhvr 1
		attr 4
		perm 10
		clac 0
		elas 0
		setv ov88 3
		setv ov00 0
		seta ov16 null
		prt: inew 0 "lift call button in" "reads in data" 37 9 1000
		prt: onew 0 "lift call button out" "outputs input data or lift call state" 38 20
*map position bottom
		mvto va45 30985

		pose 0
		setv va66 room targ
		link va66 va67 100

		new: vhcl 3 1 1 "lift" 23 0 50
		bhvr 3
		attr 12
		clac -1
		elas 0
		setv ov80 0
		addv va45 45
*map position lift
		mvto va45 30430
		seta ov99 null

		pat: dull 1 "lift" 4 0 0 200
		cabn 0 0 121 144
		cabw 5

		pat: butt 2 "lift" 16 7 52 68 0 [] 2000 1
		pat: butt 3 "lift" 16 7 52 82 0 [] 2001 1
		part 2
		anim [4]
		part 3
		anim [5]

		seta va00 targ
		enum 2 12 2
			doif ov16 = null
				seta ov16 va00
			endi
		next
		targ va00

		part 1
		anim [7]
*			************
*			***//Lift***
*			************

		setv game "MOR" 1

		kill ownr
*		oops, UH isn't installed
	else
		targ ownr
		pat: kill 2
		pat: butt 2 "useful_screen" 2 2 237 24 0 [] 1000 0
		part 1
		ptxt "You need to install the Universal Hub. Go to this webpage to get it:\n\nhttp://creatures.wikia.com/wiki/Universal_Hub"
		setv name "try" 0
	endi
	kill ownr
endm
*********
*********
***page down
scrp 1 2 24403 1001
	part 1
	setv va99 page
	setv va06 npgs
	addv va99 1

	doif va99 < npgs
		part 4
		anim [ 2 2 2 ]
		over
		part 1
		page va99
	endi

* set page counter
	mesg writ ownr 1003
endm
*********
***page up
scrp 1 2 24403 1002
	part 1
	setv va99 page

	doif va99 > 0
		part 5
		anim [ 2 2 2 ]
		over
		part 1
		subv va99 1
		page va99
	endi

* set page counter
	mesg writ ownr 1003
endm

* set page counter
scrp 1 2 24403 1003
	inst

* get number of pages and current page
	part 1
	setv va06 npgs
	setv va07 page
	addv va07 1

* set page number text
	sets va08 vtos va07
	adds va08 "/"
	adds va08 vtos va06
	part 6
	ptxt va08

* set pgup button
	part 5
	doif va07 = 1
		anim [0]
	else
		anim [1]
	endi

* set pgdn button
	part 4
	doif va07 = va06
		anim [0]
	else
		anim [1]
	endi
endm



*rscr
*enum 1 2 5
*	kill targ
*next
*enum 1 2 24403
*	kill targ
*next